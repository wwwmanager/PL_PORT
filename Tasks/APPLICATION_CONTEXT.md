# APPLICATION CONTEXT

## 1. –û–±—â–∏–π –æ–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

- **–ù–∞–∑–≤–∞–Ω–∏–µ:** Waybill App  
- **–í–µ—Ä—Å–∏—è:** 1.0.0  
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É—Ç–µ–≤—ã–º–∏ –ª–∏—Å—Ç–∞–º–∏, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º, –≤–æ–¥–∏—Ç–µ–ª—è–º–∏, –±–ª–∞–Ω–∫–∞–º–∏ –∏ —Å–∫–ª–∞–¥–æ–º –¥–ª—è –∞–≤—Ç–æ–ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–π.  
- **–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:** –°–º–µ—à–∞–Ω–Ω—ã–π ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–∫–∏ (`mockApi.ts`) + –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Backend API.

---

## 2. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend (–¥–∞–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------|------------|
| React | 19.2 | UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ |
| TypeScript | 5.2 | –¢–∏–ø–∏–∑–∞—Ü–∏—è |
| Vite | 5.2 | –°–±–æ—Ä–∫–∞ & Dev Server |
| React Hook Form | 7.51 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞–º–∏ |
| Zod | 3.22 | –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º |
| @tanstack/react-query | 5.51 | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–ø—Ä–æ—Å—ã |
| Recharts | 2.12 | –ì—Ä–∞—Ñ–∏–∫–∏ |
| @dnd-kit | 6.x/8.x | Drag & Drop |
| xlsx | 0.18 | Excel —ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç |
| lucide-react | 0.561 | –ò–∫–æ–Ω–∫–∏ |
| date-fns | 4.1 | –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏ |

**–°—Ç–∏–ª–∏:** Vanilla CSS + inline Tailwind-–ø–æ–¥–æ–±–Ω—ã–µ –∫–ª–∞—Å—Å—ã (–±–µ–∑ Tailwind config).

**–¢–µ—Å—Ç—ã:** Vitest + Testing Library.

**–ó–∞–ø—É—Å–∫ dev:** `npm run dev` ‚Üí http://localhost:3000/

### Backend (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä)

- **Express** + **TypeScript** + **Prisma/TypeORM** (–ø–æ—Ä—Ç 3001)
- **PostgreSQL** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î
- **JWT** –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

> ‚ö†Ô∏è –í –¥–∞–Ω–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ backend –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `mockApi.ts` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

---

## 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
c:/_PL_PORT/
‚îú‚îÄ‚îÄ App.tsx              # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îú‚îÄ‚îÄ components/          # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (74+)
‚îÇ   ‚îú‚îÄ‚îÄ admin/           # –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (20 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ shared/          # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ (Modal, DataTable...)
‚îÇ   ‚îú‚îÄ‚îÄ vehicles/        # –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç (VehicleList, vehicleSchema)
‚îÇ   ‚îú‚îÄ‚îÄ waybills/        # –ü—É—Ç–µ–≤—ã–µ –ª–∏—Å—Ç—ã (21 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
‚îÇ   ‚îú‚îÄ‚îÄ employees/       # –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ drivers/         # –í–æ–¥–∏—Ç–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ dictionaries/    # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (6 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/       # –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ reports/         # –û—Ç—á–µ—Ç—ã (2 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)
‚îÇ   ‚îú‚îÄ‚îÄ help/            # –°–ø—Ä–∞–≤–∫–∞ (10 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ auth/            # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ about/           # –û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ ui/              # UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ api/             # API —Ñ–∞—Å–∞–¥—ã (13 –º–æ–¥—É–ª–µ–π: waybills, vehicles, employees...)
‚îÇ   ‚îú‚îÄ‚îÄ mockApi.ts       # –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö (—Ñ–∞—Å–∞–¥ –¥–ª—è API –º–æ–¥—É–ª–µ–π)
‚îÇ   ‚îú‚îÄ‚îÄ batchWaybillService.ts  # –ü–∞–∫–µ—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—É—Ç–µ–≤—ã—Ö –ª–∏—Å—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ recalculationService.ts # –ü–µ—Ä–µ—Å—á–µ—Ç —Ç–æ–ø–ª–∏–≤–∞ –¥–ª—è —Ü–µ–ø–æ—á–µ–∫ –ü–õ
‚îÇ   ‚îú‚îÄ‚îÄ routeParserService.ts   # –ü–∞—Ä—Å–∏–Ω–≥ –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ excelImportService.ts   # –ò–º–ø–æ—Ä—Ç –∏–∑ Excel
‚îÇ   ‚îú‚îÄ‚îÄ productionCalendarService.ts
‚îÇ   ‚îú‚îÄ‚îÄ geminiService.ts        # AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ logger.ts        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ storage.ts       # LocalForage –æ–±–µ—Ä—Ç–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ repo.ts          # –û–±—â–∏–π CRUD —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ auditLog.ts      # –ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ shared/              # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ vehicleInput.ts  # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–≤–æ–¥–∞ –¢–°
‚îÇ   ‚îú‚îÄ‚îÄ vehicleCategoryMap.ts # –ú–∞–ø–ø–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¢–°
‚îÇ   ‚îî‚îÄ‚îÄ validation/      # –í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã (vehicle.ts)
‚îú‚îÄ‚îÄ hooks/               # React —Ö—É–∫–∏ (useTable, queries...) - 6 —Ö—É–∫–æ–≤
‚îú‚îÄ‚îÄ types.ts             # –û–±—â–∏–µ —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ constants.ts         # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã (—Å—Ç–∞—Ç—É—Å—ã, —Ü–≤–µ—Ç–∞)
‚îú‚îÄ‚îÄ utils/               # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (7 —É—Ç–∏–ª–∏—Ç)
‚îú‚îÄ‚îÄ domain/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (5 –º–æ–¥—É–ª–µ–π)
‚îú‚îÄ‚îÄ contexts/            # React –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã (AuthContext, ToastContext)
‚îú‚îÄ‚îÄ workers/             # Web Workers
‚îú‚îÄ‚îÄ Tasks/               # –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è AI
‚îÇ   ‚îú‚îÄ‚îÄ APPLICATION_CONTEXT.md
‚îÇ   ‚îî‚îÄ‚îÄ task.md
‚îî‚îÄ‚îÄ .agent/              # AI workflows
    ‚îî‚îÄ‚îÄ workflows/
```

---

## 4. API Endpoints

> –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å backend (–Ω–µ mockApi):

| –†–µ—Å—É—Ä—Å | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| –ü—É—Ç–µ–≤—ã–µ –ª–∏—Å—Ç—ã | `/api/waybills` | CRUD, —Å–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ |
| –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç | `/api/vehicles` | CRUD |
| –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ | `/api/employees` | CRUD, —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É |
| –ë–ª–∞–Ω–∫–∏ | `/api/blanks` | –ü–∞—Ä—Ç–∏–∏, –≤—ã–¥–∞—á–∞ |
| –°–∫–ª–∞–¥ | `/api/stock` | –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞, –¥–≤–∏–∂–µ–Ω–∏—è |
| Dashboard | `/api/dashboard` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |
| –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | `/api/auth/login`, `/api/auth/me` | JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |

---

## 5. –ö–ª—é—á–µ–≤—ã–µ –º–æ–¥—É–ª–∏

### 5.1. –ü—É—Ç–µ–≤—ã–µ –ª–∏—Å—Ç—ã (Waybills)
- `services/api/waybills.ts` ‚Äî API –º–µ—Ç–æ–¥—ã
- `components/waybills/WaybillList.tsx` ‚Äî —Å–ø–∏—Å–æ–∫
- `components/waybills/WaybillDetail.tsx` ‚Äî —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `services/batchWaybillService.ts` ‚Äî –ø–∞–∫–µ—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- `services/recalculationService.ts` ‚Äî –ø–µ—Ä–µ—Å—á–µ—Ç —Ç–æ–ø–ª–∏–≤–∞

### 5.2. –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç (Vehicles)
- `services/api/vehicles.ts` ‚Äî API –º–µ—Ç–æ–¥—ã
- `components/vehicles/VehicleList.tsx` ‚Äî —Å–ø–∏—Å–æ–∫ + —Ñ–æ—Ä–º–∞
- `components/vehicles/vehicleSchema.ts` ‚Äî Zod –≤–∞–ª–∏–¥–∞—Ü–∏—è
- `shared/vehicleInput.ts` ‚Äî –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–≤–æ–¥–∞ (–≥–æ—Å–Ω–æ–º–µ—Ä, VIN)
- `shared/vehicleCategoryMap.ts` ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–π –æ—Ç —Ç–∏–ø–∞ –¢–°

### 5.3. –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
- `components/shared/Modal.tsx` ‚Äî –±–∞–∑–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (drag & resize, GPU acceleration)
- `components/shared/ConfirmationModal.tsx`
- `components/shared/DataTable.tsx` ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

### 5.4. –†–∞—Å—á–µ—Ç—ã —Ç–æ–ø–ª–∏–≤–∞

> ‚ö†Ô∏è **–í–ê–ñ–ù–û:** –§–∞–π–ª `fuelCalculationService.ts` –ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –¥–∞–Ω–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

–õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ —Ç–æ–ø–ª–∏–≤–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –ø–æ –º–æ–¥—É–ª—è–º:
- **`services/recalculationService.ts`** ‚Äî –ø–µ—Ä–µ—Å—á–µ—Ç —Ü–µ–ø–æ—á–∫–∏ –ü–õ
- **`services/batchWaybillService.ts`** ‚Äî –ø–∞–∫–µ—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **`components/waybills/WaybillDetail.tsx`** ‚Äî UI —Ä–∞—Å—á–µ—Ç—ã
- **`components/waybills/WaybillCheckModal.tsx`** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ–º

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª–æ–≥–∏–∫–∏ —Ç–æ–ø–ª–∏–≤–∞ ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —ç—Ç–∏ –º–µ—Å—Ç–∞.

---

## 6. AI Session Rules

### 6.1. –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Å—Å–∏–∏

AI –æ–±—è–∑–∞–Ω:
1. –ü—Ä–æ—á–∏—Ç–∞—Ç—å `.ai-instructions.md` (–∫–æ—Ä–Ω–µ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è)
2. –ü—Ä–æ—á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª (`Tasks/APPLICATION_CONTEXT.md`)
3. –ü—Ä–æ—á–∏—Ç–∞—Ç—å `Tasks/task.md` (–µ—Å–ª–∏ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è –∑–∞–¥–∞—á–∞)
4. –°–æ–æ–±—â–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ

### 6.2. –§–æ—Ä–º–∞—Ç –ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

```
–ö–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–≥—Ä—É–∂–µ–Ω:
- APPLICATION_CONTEXT.md –ø—Ä–æ—á–∏—Ç–∞–Ω
- .ai-instructions.md –ø—Ä–æ—á–∏—Ç–∞–Ω
- –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑–≤–µ—Å—Ç–Ω–∞

–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ. –ö–∞–∫—É—é –∑–∞–¥–∞—á—É –≤—ã–ø–æ–ª–Ω—è–µ–º?
```

### 6.3. –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –∫–æ–¥–æ–º

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Zod —Å—Ö–µ–º—ã. –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ö–µ–º—ã –≤ `components/*/...Schema.ts`.
2. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–≤–æ–¥–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `shared/vehicleInput.ts`.
3. **–§–æ—Ä–º—ã:** React Hook Form + `useController` –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã—Ö –ø–æ–ª–µ–π.
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** `useToast` —Ö—É–∫.
5. **–ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Modal` —Å props `isDraggable`, `isResizable`, `maxWidth`.

### 6.4. –†–∞—Å—á–µ—Ç —Ç–æ–ø–ª–∏–≤–∞ (–ö–†–ò–¢–ò–ß–ù–û!)

> ‚ö†Ô∏è `fuelCalculationService.ts` –ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –õ–æ–≥–∏–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∞.

**–¢–µ–∫—É—â–∏–µ –º–æ–¥—É–ª–∏ —Ä–∞—Å—á–µ—Ç–∞:**
- `services/recalculationService.ts` ‚Äî –ø–µ—Ä–µ—Å—á–µ—Ç —Ü–µ–ø–æ—á–∫–∏
- `services/batchWaybillService.ts` ‚Äî –ø–∞–∫–µ—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `components/waybills/WaybillDetail.tsx` ‚Äî UI —Ä–∞—Å—á–µ—Ç—ã

**–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏:**
1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–æ–π –º–æ–¥—É–ª—å –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç—Å—è
2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
3. –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã

**–ó–∞–ø—Ä–µ—â–µ–Ω–æ:**
- –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Ä–∞—Å—á–µ—Ç–∞ –±–µ–∑ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è
- –î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
- –ò–∑–º–µ–Ω—è—Ç—å —Ñ–æ—Ä–º—É–ª—ã –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –º–µ—Å—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## 7. Change Protocol (CANON) ‚Äî LOG-CHG-001

### File
Tasks/PROJECT_LOG.md (append-only, newest first)

### Rule
No change is considered done until a PROJECT_LOG entry exists.

### When to write
- Code: at end of task before merge/commit.
- Debug/perf: immediately after root cause + fix are found.

### Entry template

```markdown
## DD.MM.YYYY.HH:MM ‚Äî –ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
```

> ‚ö†Ô∏è **–Ø–∑—ã–∫ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤:** –ó–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–ø–∏—Å–µ–π (Headers) –î–û–õ–ñ–ù–´ –±—ã—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ. –¢–µ–ª–æ –∑–∞–ø–∏—Å–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–º–µ—à–∞–Ω–Ω—ã–º, –Ω–æ —Ä—É—Å—Å–∫–∏–π –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª–µ–Ω –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

> ‚ö†Ô∏è **–§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã:** `DD.MM.YYYY.HH:MM` –ø–æ –£—Ä–∞–ª—å—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ (UTC+5).  
> –ü—Ä–∏–º–µ—Ä: `17.01.2026.14:10`

**Type:** feat | fix | perf | refactor | docs | chore | debug  
**Zone:** vehicles | waybills | modal | repo | validation | ui | fuel | build | deps | blanks | import  
**Context/problem:** 1‚Äì2 sentences.  
**What was done:**
- ...

**How verified:**
- ...

**Files:**
- [NEW|MODIFY|DELETE] `path/to/file`

**Risks/notes:** (optional)  
**Links:** files, PR/commit, issue/task.

### Optional
- ADRs: Tasks/adr/ADR-YYYYMMDD-<slug>.md (only for hard-to-reverse decisions). See ADR guidance [web:10].
- Release notes: CHANGELOG.md in Keep a Changelog format [web:9].

## Modal invariant (CANON) ‚Äî INV-MODAL-001
(–ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–∞ + —á—Ç–æ —Å—á–∏—Ç–∞—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏–µ–º)

## Vehicle rules (CANON) ‚Äî INV-VEH-CAT-001
(–ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –ø—Ä–æ vehicleCategory, –≤–∫–ª—é—á–∞—è –∑–∞–ø—Ä–µ—Ç Tm/Tb)


## 8. –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –ù–µ–¥–∞–≤–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
- **2026-01-16:** VEHICLE-SCHEMA-002 ‚Äî –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `require is not defined` –≤ `vehicleSchema.ts` (–∑–∞–º–µ–Ω–µ–Ω –Ω–∞ ES import)
- **2026-01-15:** VEHICLE-CAT-001 ‚Äî –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å vehicleCategory –æ—Ç vehicleType. –î–æ–±–∞–≤–ª–µ–Ω—ã –£–¢–ú –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π dropdown, –∞–≤—Ç–æ—Å–±—Ä–æ—Å
- **2026-01-15:** VEHICLE-INPUT-001 ‚Äî Controlled Inputs —Å –∞–≤—Ç–æ-–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π (–∫–∏—Ä–∏–ª–ª–∏—Ü–∞‚Üí–ª–∞—Ç–∏–Ω–∏—Ü–∞) –¥–ª—è –≥–æ—Å–Ω–æ–º–µ—Ä–∞, VIN, –∫—É–∑–æ–≤–∞, —à–∞—Å—Å–∏
- **2026-01-15:** MODAL-PERF-001 ‚Äî –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –º–æ–¥–∞–ª–æ–∫: GPU acceleration, –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ transitions
- **2025-12-31:** UI-DESIGN-007 ‚Äî –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º—ã (teal-600)

### üìã –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- `mockApi.ts` –≤—Å–µ –µ—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- CSS —Å—Ç–∏–ª–∏ ‚Äî inline –∫–ª–∞—Å—Å—ã (Tailwind-like), –Ω–æ –±–µ–∑ Tailwind –∫–æ–Ω—Ñ–∏–≥–∞
- Backend ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–Ω–µ –≤ —ç—Ç–æ–π –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ)
- –†–∞—Å—á–µ—Ç—ã —Ç–æ–ø–ª–∏–≤–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –º–æ–¥—É–ª—è–º (–Ω–µ—Ç –µ–¥–∏–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞)

### ‚è≥ –í —Ä–∞–±–æ—Ç–µ
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞
- –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## History

- **2026-01-16:** APP-CONTEXT-001 ‚Äî –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è APPLICATION_CONTEXT.md: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è (—Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã, —Å—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞, —Ä–∞—Å—á–µ—Ç —Ç–æ–ø–ª–∏–≤–∞).
- **2026-01-16:** VEHICLE-SCHEMA-002 ‚Äî –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ vehicleSchema.ts (require ‚Üí ES import).
- **2026-01-15:** VEHICLE-CAT-001 ‚Äî –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å vehicleCategory –æ—Ç vehicleType. –î–æ–±–∞–≤–ª–µ–Ω—ã –£–¢–ú –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π dropdown, –∞–≤—Ç–æ—Å–±—Ä–æ—Å.
- **2026-01-15:** VEHICLE-INPUT-001 ‚Äî Controlled Inputs —Å –∞–≤—Ç–æ-–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π (–∫–∏—Ä–∏–ª–ª–∏—Ü–∞‚Üí–ª–∞—Ç–∏–Ω–∏—Ü–∞) –¥–ª—è –≥–æ—Å–Ω–æ–º–µ—Ä–∞, VIN, –∫—É–∑–æ–≤–∞, —à–∞—Å—Å–∏.
- **2026-01-15:** MODAL-PERF-001 ‚Äî –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –º–æ–¥–∞–ª–æ–∫: GPU acceleration, –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ transitions.
- **2025-12-31:** UI-DESIGN-007 ‚Äî –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º—ã (teal-600).

---

=== END OF PROJECT CONTEXT ===